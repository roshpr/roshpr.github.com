---
layout: post
title: Visualizing AWS VPC Network access statistics
categories:
  - cloud
excerpt_separator:  <!--more-->
---

![placeholder](https://github.com/roshpr/roshpr.github.com/blob/master/_images/visualize_vpc_traffic.jpeg?raw=true "Visualizing AWS VPC Network access statistics")


Most of the enterprises once after deploying their application on AWS VPC network have 
difficulty trouble shooting their network. AWS currently does not provide any out of the 
box solution to view the network traffic flow and troubleshoot any issues or intrusion. 
Everyday there are hundreds of intrusions that happens on a network. The intrusion mostly 
goes unnoticed if proper analysis is not done, this can cost you your network security 
if not monitored in regular basis.

In order to help an admin monitor his network I have come up with a tool to monitor network 
traffic on a VPC. The tool enhances the capability provided by AWS on there blog "How to 
Visualize and Refine Your Networkâ€™s Security by Adding Security Group IDs to Your VPC Flow Logs". 
To deploy the solution we need to follow the steps provided in the AWS blog and apply the 
customization from my git <a href="https://github.com/roshpr/aws-vpc-flow-log-appender" target="_blank">repo</a>. I have customized the AWS appender code & added new Dashboard 
for Kibana & elasticsearch mapping. Detailed steps to apply the required changes are provided in 
the git repo. You will need to use my appender instead of the one AWS provides.

The Kibana dashboard plots the following additional details as compared to what is provided in the AWS blog

1. List of VPCs and subnets having most traffic.
2. Additional names to all security groups to identify them easily rather than using random ids.
3. Ports being used and there usage.
4. MAP to plot the source IP.

Once you are done with the required changes you should be able to perform the following

1. Find the external intruders into your network.
2. From the ports usage we can identify different applications usage.
3. Firewall / security policy usage. You will be able to block any ports depending on the ports and security policy usages.
4. Identify the interfaces, security policies and ports having most no of traffic REJECT status and analyze the reason for rejection and changes policies accordingly.
5. Amount of traffic being generated by each instance and traffic coming into the network.
6. Find geographical traffic distribution.

Note: The code required for creating the whole deployment cannot be published due to enterprise policies and restriction, 
hence I'm only providing code that is an enhancement over AWS code.